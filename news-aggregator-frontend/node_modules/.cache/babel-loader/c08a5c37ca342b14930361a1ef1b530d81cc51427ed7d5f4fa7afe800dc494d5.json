{"ast":null,"code":"import apiRequest from \"../lib/api\";\nexport const checkUserPreferences = async (access_token, navigate, redirectOnSuccess = \"/\") => {\n  try {\n    var _res$data$preferences;\n    const res = await apiRequest.get(\"/preferences\", {\n      headers: {\n        Authorization: `Bearer ${access_token}`\n      }\n    });\n    const preferences = ((_res$data$preferences = res.data.preferences) === null || _res$data$preferences === void 0 ? void 0 : _res$data$preferences.settings) || {};\n    const isPreferencesEmpty = (!preferences.authors || preferences.authors.length === 0) && (!preferences.source_ids || preferences.source_ids.length === 0) && (!preferences.category_ids || preferences.category_ids.length === 0);\n    if (isPreferencesEmpty) {\n      navigate(\"/preferences\");\n    } else {\n      navigate(redirectOnSuccess);\n    }\n  } catch (err) {\n    console.error(\"Error fetching user preferences:\", err);\n  }\n};","map":{"version":3,"names":["apiRequest","checkUserPreferences","access_token","navigate","redirectOnSuccess","_res$data$preferences","res","get","headers","Authorization","preferences","data","settings","isPreferencesEmpty","authors","length","source_ids","category_ids","err","console","error"],"sources":["/Applications/MAMP/htdocs/innoscripta/news-aggregator-frontend/src/utils/preferenceUtils.js"],"sourcesContent":["import apiRequest from \"../lib/api\";\n\nexport const checkUserPreferences = async (access_token, navigate, redirectOnSuccess = \"/\") => {\n  try {\n    const res = await apiRequest.get(\"/preferences\", {\n      headers: {\n        Authorization: `Bearer ${access_token}`,\n      },\n    });\n\n    const preferences = res.data.preferences?.settings || {};\n\n    const isPreferencesEmpty =\n      (!preferences.authors || preferences.authors.length === 0) &&\n      (!preferences.source_ids || preferences.source_ids.length === 0) &&\n      (!preferences.category_ids || preferences.category_ids.length === 0);\n\n    if (isPreferencesEmpty) {\n      navigate(\"/preferences\");\n    } else {\n      navigate(redirectOnSuccess)\n    }\n  } catch (err) {\n    console.error(\"Error fetching user preferences:\", err);\n  }\n};\n"],"mappings":"AAAA,OAAOA,UAAU,MAAM,YAAY;AAEnC,OAAO,MAAMC,oBAAoB,GAAG,MAAAA,CAAOC,YAAY,EAAEC,QAAQ,EAAEC,iBAAiB,GAAG,GAAG,KAAK;EAC7F,IAAI;IAAA,IAAAC,qBAAA;IACF,MAAMC,GAAG,GAAG,MAAMN,UAAU,CAACO,GAAG,CAAC,cAAc,EAAE;MAC/CC,OAAO,EAAE;QACPC,aAAa,EAAE,UAAUP,YAAY;MACvC;IACF,CAAC,CAAC;IAEF,MAAMQ,WAAW,GAAG,EAAAL,qBAAA,GAAAC,GAAG,CAACK,IAAI,CAACD,WAAW,cAAAL,qBAAA,uBAApBA,qBAAA,CAAsBO,QAAQ,KAAI,CAAC,CAAC;IAExD,MAAMC,kBAAkB,GACtB,CAAC,CAACH,WAAW,CAACI,OAAO,IAAIJ,WAAW,CAACI,OAAO,CAACC,MAAM,KAAK,CAAC,MACxD,CAACL,WAAW,CAACM,UAAU,IAAIN,WAAW,CAACM,UAAU,CAACD,MAAM,KAAK,CAAC,CAAC,KAC/D,CAACL,WAAW,CAACO,YAAY,IAAIP,WAAW,CAACO,YAAY,CAACF,MAAM,KAAK,CAAC,CAAC;IAEtE,IAAIF,kBAAkB,EAAE;MACtBV,QAAQ,CAAC,cAAc,CAAC;IAC1B,CAAC,MAAM;MACLA,QAAQ,CAACC,iBAAiB,CAAC;IAC7B;EACF,CAAC,CAAC,OAAOc,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,kCAAkC,EAAEF,GAAG,CAAC;EACxD;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}