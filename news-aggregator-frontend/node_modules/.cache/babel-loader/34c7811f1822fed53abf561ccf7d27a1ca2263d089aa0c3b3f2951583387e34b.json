{"ast":null,"code":"var _jsxFileName = \"/Applications/MAMP/htdocs/innoscripta/news-aggregator-frontend/src/pages/HomePage/HomePage.jsx\",\n  _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nimport SearchBar from \"../../components/searchbar/SearchBar\";\nimport apiRequest from \"../../lib/api\";\nimport \"./homePage.scss\";\nimport Loader from \"../../components/Loader/Loader\";\nimport ArticalCards from \"../../components/articales/Articals\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst getPageNumber = pageUrl => {\n  if (!pageUrl) return null;\n  const urlParams = new URLSearchParams(pageUrl.split('?')[1]);\n  return urlParams.get('page');\n};\nconst HomePage = () => {\n  _s();\n  const [articles, setArticles] = useState([]);\n  const [pagination, setPagination] = useState({});\n  const [searchParams, setSearchParams] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const token = JSON.parse(localStorage.getItem(\"access_token\"));\n  const fetchArticles = async (url = \"/articles\", params = \"\") => {\n    setIsLoading(true);\n    try {\n      const res = await apiRequest.get(`${url}${params}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        }\n      });\n      const articlesData = res.data.articles;\n      setArticles(articlesData.data);\n      setIsLoading(false);\n      setPagination({\n        next: articlesData.next_page_url ? getPageNumber(articlesData.next_page_url) : null,\n        prev: articlesData.prev_page_url ? getPageNumber(articlesData.prev_page_url) : null\n      });\n    } catch (err) {\n      console.error(\"Error fetching articles:\", err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchArticles();\n  }, []);\n  const handleSearchResults = (fetchedArticles, searchParamsString) => {\n    setArticles(fetchedArticles.data);\n    setSearchParams(searchParamsString);\n    setPagination({\n      next: fetchedArticles.next_page_url ? getPageNumber(fetchedArticles.next_page_url) : null,\n      prev: fetchedArticles.prev_page_url ? getPageNumber(fetchedArticles.prev_page_url) : null\n    });\n  };\n  const handlePageChange = page => {\n    if (page) {\n      const params = new URLSearchParams(searchParams);\n      params.set('page', page);\n      fetchArticles(\"/articles\", `?${params.toString()}`);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"home\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"heading\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: \"Article Search!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          class: \"divider div-transparent div-dot\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SearchBar, {\n        onSearch: handleSearchResults\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"Cards\",\n        children: isLoading ? /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"spinner\",\n            children: /*#__PURE__*/_jsxDEV(Loader, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this)\n        }, void 0, false) : /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: /*#__PURE__*/_jsxDEV(ArticalCards, {\n            articles: articles\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)\n        }, void 0, false)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pagination\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handlePageChange(pagination.prev),\n          disabled: !pagination.prev || isLoading,\n          className: \"prev\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: \"<<\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 13\n          }, this), \" \", \"Previous\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handlePageChange(pagination.next),\n          className: \"next\",\n          disabled: !pagination.next || articles.length < 15 || isLoading,\n          children: [\"Next\", \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            children: \">>\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 22\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n_s(HomePage, \"51YwYCSv59eI1aeUyNdrryDMUk4=\");\n_c = HomePage;\nexport default HomePage;\nvar _c;\n$RefreshReg$(_c, \"HomePage\");","map":{"version":3,"names":["useEffect","useState","SearchBar","apiRequest","Loader","ArticalCards","jsxDEV","_jsxDEV","Fragment","_Fragment","getPageNumber","pageUrl","urlParams","URLSearchParams","split","get","HomePage","_s","articles","setArticles","pagination","setPagination","searchParams","setSearchParams","isLoading","setIsLoading","token","JSON","parse","localStorage","getItem","fetchArticles","url","params","res","headers","Authorization","articlesData","data","next","next_page_url","prev","prev_page_url","err","console","error","handleSearchResults","fetchedArticles","searchParamsString","handlePageChange","page","set","toString","children","className","fileName","_jsxFileName","lineNumber","columnNumber","class","onSearch","onClick","disabled","length","_c","$RefreshReg$"],"sources":["/Applications/MAMP/htdocs/innoscripta/news-aggregator-frontend/src/pages/HomePage/HomePage.jsx"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport SearchBar from \"../../components/searchbar/SearchBar\";\nimport apiRequest from \"../../lib/api\";\nimport \"./homePage.scss\";\nimport Loader from \"../../components/Loader/Loader\";\nimport ArticalCards from \"../../components/articales/Articals\";\n\nconst getPageNumber = (pageUrl) => {\n  if (!pageUrl) return null;\n  const urlParams = new URLSearchParams(pageUrl.split('?')[1]);\n  return urlParams.get('page');\n};\n\nconst HomePage = () => {\n  const [articles, setArticles] = useState([]);\n  const [pagination, setPagination] = useState({});\n  const [searchParams, setSearchParams] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const token = JSON.parse(localStorage.getItem(\"access_token\"));\n\n  const fetchArticles = async (url = \"/articles\", params = \"\") => {\n    setIsLoading(true);\n    try {\n      const res = await apiRequest.get(`${url}${params}`, {\n        headers: {\n          Authorization: `Bearer ${token}`\n        },\n      });\n\n      const articlesData = res.data.articles;\n      setArticles(articlesData.data);\n      setIsLoading(false);\n\n      setPagination({\n        next: articlesData.next_page_url ? getPageNumber(articlesData.next_page_url) : null,\n        prev: articlesData.prev_page_url ? getPageNumber(articlesData.prev_page_url) : null,\n      });\n    } catch (err) {\n      console.error(\"Error fetching articles:\", err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n\n  useEffect(() => {\n    fetchArticles();\n  }, []);\n\n\n  const handleSearchResults = (fetchedArticles, searchParamsString) => {\n    setArticles(fetchedArticles.data);\n    setSearchParams(searchParamsString);\n\n    setPagination({\n      next: fetchedArticles.next_page_url ? getPageNumber(fetchedArticles.next_page_url) : null,\n      prev: fetchedArticles.prev_page_url ? getPageNumber(fetchedArticles.prev_page_url) : null,\n    });\n  };\n\n  const handlePageChange = (page) => {\n    if (page) {\n      const params = new URLSearchParams(searchParams);\n      params.set('page', page);\n      fetchArticles(\"/articles\", `?${params.toString()}`);\n    }\n  };\n\n  return (\n    <>\n      <div className=\"home\">\n        <div className=\"heading\">\n          <h3>\n            {\"Article Search!\"}\n          </h3>\n          <div class=\"divider div-transparent div-dot\"></div>\n        </div>\n        <SearchBar onSearch={handleSearchResults} />\n        <div className=\"Cards\">\n          {isLoading ? (<>\n            <div className=\"spinner\">\n              <Loader />\n            </div>\n          </>) : (<>\n            <ArticalCards articles={articles} />\n          </>)}\n\n        </div>\n\n        <div className=\"pagination\">\n          <button\n            onClick={() => handlePageChange(pagination.prev)}\n            disabled={!pagination.prev || isLoading}\n            className=\"prev\"\n          >\n            <span>{\"<<\"}</span> {\"Previous\"}\n          </button>\n          <button\n            onClick={() => handlePageChange(pagination.next)}\n            className=\"next\"\n            disabled={!pagination.next || articles.length < 15 || isLoading}\n          >\n            {\"Next\"} <span>{\">>\"}</span>\n          </button>\n        </div>\n\n      </div>\n    </>\n  );\n};\n\nexport default HomePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}